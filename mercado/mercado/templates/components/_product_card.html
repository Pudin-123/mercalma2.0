<div class="card product-card border-0 shadow-sm position-relative overflow-hidden">
  {% if product.category %}
    <span class="product-badge position-absolute top-0 start-0 m-2 px-2 py-1 bg-primary text-white rounded-pill small shadow">
      {{ product.category.name }}
    </span>
  {% endif %}

  <div class="ratio ratio-1x1 bg-light">
    {% if product.image %}
      <img src="{{ product.image.url }}" alt="{{ product.title }}" class="img-fluid object-fit-cover" loading="lazy">
    {% else %}
      <img src="{% static 'img/placeholder.jpg' %}" alt="Sin imagen" class="img-fluid object-fit-cover opacity-75">
    {% endif %}
  </div>

  <div class="card-body">
    <h5 class="card-title mb-1 text-truncate" title="{{ product.title }}">
      {{ product.title }}
    </h5>
    <p class="text-muted small mb-3">{{ product.description|truncatewords:15 }}</p>

    <div class="d-flex justify-content-between align-items-center">
      <div class="fw-bold text-success">${{ product.price|floatformat:2 }}</div>
      <div>
        <a href="{% url 'product-detail' product.id %}" class="btn btn-sm btn-outline-primary">Ver</a>
        {% if user.is_authenticated %}
          <a href="{% url 'add-to-cart' product.id %}" class="btn btn-sm btn-primary ms-2">AÃ±adir</a>
        {% endif %}
      </div>
    </div>
  </div>
</div>
